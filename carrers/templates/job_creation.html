<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Job Posting Form</title>
  <!-- Include Bootstrap CSS -->
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <!-- Include jQuery UI CSS -->
  <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
</head>
<body>
  <div class="container mt-5">
    <h2>Create a Job Posting</h2>
    <form id="jobForm"  method="POST" action="{%url 'job_creation'%}" >
        {%csrf_token%}
      <div class="form-group">
        <label for="title">Title:</label>
        <div class="input-group mb-3">
          <input type="text" class="form-control" id="title" name="title" required>
        </div>
      </div>
      <div class="form-group">
        <label for="description">Description:</label>
        <div class="input-group mb-3">
          <textarea class="form-control" id="description" name="description" rows="4" required></textarea>
        </div>
      </div>
      <div class="form-group">
        <label for="role">Role:</label>
        <div class="input-group mb-3">
          <input type="text" class="form-control" id="role" name="role" required>
        </div>
      </div>
      <div class="form-group">
        <label for="industryType">Industry Type:</label>
        <input type="text" class="form-control" id="industryType" name="industryType" required>
      </div>
      <div class="form-group">
        <label for="openings">Number of Openings:</label>
        <input type="number" class="form-control" id="openings" name="openings" required>
      </div>
      <div class="form-group">
        <label for="location">Location:</label>
        <input type="text" class="form-control" id="location" name="location" required>
      </div>
      <div class="form-group">
        <label for="employmentType">Employment Type:</label>
        <select class="form-control" id="employmentType" name="employmentType" required>
          <option value="FULLTIME">Full-Time</option>
          <option value="PARTTIME">Part-Time</option>
          <option value="WORKFROMHOME">Work from Home</option>
        </select>
      </div>
      <div class="form-group">
        <label for="employmentDuration">Duration of Employment (months):</label>
        <input type="number" class="form-control" id="employmentDuration" name="employmentDuration" required>
      </div>
      <div class="form-group">
        <label for="openUntil">Open Until:</label>
        <input type="datetime" class="form-control" id="datepickerOpenUntil" name="open_until" >
      </div>
      
      <div class="form-group">
        <label for="salaryVisible">Salary Visible:</label>
        <input type="checkbox" class="form-control" id="salaryVisible" name="salaryVisible">
      </div>
      
      <div class="form-group">
        <label for="minSalary">Minimum Salary:</label>
        <input type="number" class="form-control" id="minSalary" name="minSalary" disabled>
      </div>
      
      <div class="form-group">
        <label for="maxSalary">Maximum Salary:</label>
        <input type="number" class="form-control" id="maxSalary" name="maxSalary" disabled>
      </div>
      <div class="form-group">
        <label for="educationLevel">Education Level:</label>
        <select class="form-control" id="educationLevel" name="educationLevel" required>
          <option value="btech">B.Tech</option>
          <option value="mtech">M.Tech</option>
          <option value="mba">MBA</option>
          <option value="ms">MS</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="yearsOfExperience">Years of Experience:</label>
        <input type="number" class="form-control" id="yearsOfExperience" name="yearsOfExperience">
      </div>
      
      <div class="form-group">
        <label for="mandatorySkills">Mandatory Skills:</label>
        <input type="text" class="form-control" id="mandatorySkills" name="mandatorySkills">
      </div>
      
      <div class="form-group">
        <label for="optionalSkills">Optional Skills:</label>
        <input type="text" class="form-control" id="optionalSkills" name="optionalSkills">
      </div>
      <div class="form-group">
        <label for="CreatedOn">created on</label>
        <input type="datetime" class="form-control" id="datepickerCreatedOn" name="created_on">

    </div>
    
      

      
      <div class="form-group">
        <button type="submit" class="btn btn-primary">Create Job Posting</button>
      </div>
    </form>
  </div>
  <div id="message"></div>

  <script>
    $(function() {
      $("#datepickerOpenUntil").datepicker();
      
      
      // Add event listener to Salary Visible checkbox
      $("#salaryVisible").on("change", function() {
        if (this.checked) {
          $("#minSalary").prop("disabled", false);
          $("#maxSalary").prop("disabled", false);
        } else {
          $("#minSalary").prop("disabled", true);
          $("#maxSalary").prop("disabled", true);
        }
      });
    });


    document.addEventListener('DOMContentLoaded', function () {
        const form = document.getElementById('job-form');
        const messageDiv = document.getElementById('message');
    
        form.addEventListener('submit', function (event) {
            event.preventDefault();  // Prevent the form from submitting traditionally
    
            const formData = new FormData(form);
    
            fetch('/job-creation/', {
                method: 'POST',
                body: formData,
                headers: {
                    'X-Requested-With': 'XMLHttpRequest',
                    // You can add more headers here if needed
                }
            })
            .then(response => response.json())
            .then(data => {
                // Handle the response from the backend
                if (data.message === 'Job created successfully.') {
                    messageDiv.textContent = 'Job created successfully!';
                } else {
                    messageDiv.textContent = 'Failed to create job.';
                }
            })
            .catch(error => {
                messageDiv.textContent = 'An error occurred.';
                console.error(error);
            });
        });
    });
    
  </script>
</body>
</html>






